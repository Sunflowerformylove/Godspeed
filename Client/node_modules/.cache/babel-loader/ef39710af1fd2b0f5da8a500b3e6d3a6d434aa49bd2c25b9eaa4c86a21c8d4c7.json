{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dodin\\\\Desktop\\\\Godspeed\\\\Client\\\\src\\\\Components\\\\RoomNav.js\",\n  _s = $RefreshSig$();\nimport \"../Style/RoomNav.css\";\nimport { useContext } from \"react\";\nimport { forwardRef, useEffect, useRef, useState } from \"react\";\nimport { Room, RoomExist } from \"./Room\";\nimport axios from \"axios\";\nimport userContext from \"./userData\";\nimport Socket from \"./Socket\";\nimport { IonIcon } from \"@ionic/react\";\nimport * as Icon from \"ionicons/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const RoomNav = /*#__PURE__*/_s( /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n  const searchIconRef = useRef(null);\n  const searchContainerRef = useRef(null);\n  const [searchResult, setSearchRes] = useState([]);\n  const [room, setRoom] = useState([]);\n  const [user, setUser] = useContext(userContext);\n  useEffect(() => {\n    Socket.emit(\"getRoom\", user.ID);\n    Socket.on(\"loadRoom\", data => {\n      setRoom(data);\n    });\n  }, []);\n  function searchUser(event) {\n    if (event.target.value.trim() !== \"\") {\n      axios({\n        method: \"POST\",\n        url: \"https://localhost:3000/search\",\n        data: JSON.stringify({\n          search: event.target.value.trim()\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.data).then(data => {\n        setSearchRes(data);\n      });\n    } else {\n      setSearchRes([]);\n    }\n  }\n  function checkContain(arr, obj) {\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i].roomID === obj.roomID) {\n        return true;\n      }\n    }\n    return false;\n  }\n  useEffect(() => {\n    for (let i = 0; i < room.length; i++) {\n      if (room[i].roomID === props.newRoom.roomID && room[i].recipient === props.newRoom.recipient) {\n        props.newRoom.roomName = room[i].roomName;\n        props.newRoom.recipientName = room[i].recipientName;\n        props.newRoom.senderName = room[i].senderName;\n        props.newRoom.lastMessage = room[i].lastMessage;\n        let temp = room;\n        temp.splice(i, 1);\n        temp.unshift(props.newRoom);\n        setRoom(temp);\n        return;\n      }\n    }\n    if (!checkContain(room, props.newRoom)) {\n      if (props.newRoom.roomID !== undefined) {\n        setRoom([props.newRoom, ...room]);\n      }\n    }\n  }, [props, room]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"roomNav\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navHeader\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"textTitle\",\n          children: \"Chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"search\",\n          onFocus: () => {\n            searchIconRef.current.style.display = \"none\";\n            searchContainerRef.current.style.display = \"flex\";\n          },\n          onBlur: event => {\n            if (event.target.value.length === 0) {\n              searchIconRef.current.style.display = \"flex\";\n              searchContainerRef.current.style.display = \"none\";\n            }\n          },\n          onInput: event => {\n            searchUser(event);\n          },\n          className: \"searchBar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IonIcon, {\n          ref: searchIconRef,\n          icon: Icon.searchOutline,\n          className: \"searchIcon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"roomContainer\",\n        children: room.map(room => {\n          return /*#__PURE__*/_jsxDEV(RoomExist, {\n            ID: room.recipient,\n            roomID: room.roomID,\n            message: props.message,\n            setMessage: props.setMessage,\n            ref: ref,\n            name: room.roomName,\n            latestMessage: !props.latestMessage[`${room.roomID}`] ? room.lastMessage : props.latestMessage[`${room.roomID}`].content,\n            sender: !props.latestMessage[`${room.roomID}`] ? room.senderName : props.latestMessage[`${room.roomID}`].sender,\n            timestamp: room.timestamp\n          }, room.roomID, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: searchContainerRef,\n        className: \"searchContainer\",\n        children: searchResult.map(user => {\n          return /*#__PURE__*/_jsxDEV(Room, {\n            ref: ref,\n            ID: user.ID,\n            searchContainerRef: searchContainerRef,\n            message: props.message,\n            setMessage: props.setMessage,\n            name: user.user\n          }, user.ID, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}, \"IIxVg4QVq/7CcTvt7ms18bDe2nc=\")), \"IIxVg4QVq/7CcTvt7ms18bDe2nc=\");\n_c2 = RoomNav;\nvar _c, _c2;\n$RefreshReg$(_c, \"RoomNav$forwardRef\");\n$RefreshReg$(_c2, \"RoomNav\");","map":{"version":3,"names":["useContext","forwardRef","useEffect","useRef","useState","Room","RoomExist","axios","userContext","Socket","IonIcon","Icon","jsxDEV","_jsxDEV","Fragment","_Fragment","RoomNav","_s","_c","props","ref","searchIconRef","searchContainerRef","searchResult","setSearchRes","room","setRoom","user","setUser","emit","ID","on","data","searchUser","event","target","value","trim","method","url","JSON","stringify","search","headers","then","response","checkContain","arr","obj","i","length","roomID","newRoom","recipient","roomName","recipientName","senderName","lastMessage","temp","splice","unshift","undefined","children","className","fileName","_jsxFileName","lineNumber","columnNumber","name","onFocus","current","style","display","onBlur","onInput","icon","searchOutline","map","message","setMessage","latestMessage","content","sender","timestamp","_c2","$RefreshReg$"],"sources":["C:/Users/dodin/Desktop/Godspeed/Client/src/Components/RoomNav.js"],"sourcesContent":["import \"../Style/RoomNav.css\";\r\nimport { useContext } from \"react\";\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\";\r\nimport { Room, RoomExist } from \"./Room\";\r\nimport axios from \"axios\";\r\nimport userContext from \"./userData\";\r\nimport Socket from \"./Socket\";\r\nimport { IonIcon } from \"@ionic/react\";\r\nimport * as Icon from \"ionicons/icons\";\r\n\r\nexport const RoomNav = forwardRef((props, ref) => {\r\n  const searchIconRef = useRef(null);\r\n  const searchContainerRef = useRef(null);\r\n  const [searchResult, setSearchRes] = useState([]);\r\n  const [room, setRoom] = useState([]);\r\n  const [user, setUser] = useContext(userContext);\r\n  useEffect(() => {\r\n    Socket.emit(\"getRoom\", user.ID);\r\n    Socket.on(\"loadRoom\", (data) => {\r\n      setRoom(data);\r\n    });\r\n  }, []);\r\n  function searchUser(event) {\r\n    if (event.target.value.trim() !== \"\") {\r\n      axios({\r\n        method: \"POST\",\r\n        url: \"https://localhost:3000/search\",\r\n        data: JSON.stringify({ search: event.target.value.trim() }),\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      })\r\n        .then((response) => response.data)\r\n        .then((data) => {\r\n          setSearchRes(data);\r\n        });\r\n    } else {\r\n      setSearchRes([]);\r\n    }\r\n  }\r\n\r\n  function checkContain(arr, obj) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (arr[i].roomID === obj.roomID) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  useEffect(() => {\r\n    for (let i = 0; i < room.length; i++) {\r\n      if (\r\n        room[i].roomID === props.newRoom.roomID &&\r\n        room[i].recipient === props.newRoom.recipient\r\n      ) {\r\n        props.newRoom.roomName = room[i].roomName;\r\n        props.newRoom.recipientName = room[i].recipientName;\r\n        props.newRoom.senderName = room[i].senderName;\r\n        props.newRoom.lastMessage = room[i].lastMessage;\r\n        let temp = room;\r\n        temp.splice(i, 1);\r\n        temp.unshift(props.newRoom);\r\n        setRoom(temp);\r\n        return;\r\n      }\r\n    }\r\n    if (!checkContain(room, props.newRoom)) {\r\n      if (props.newRoom.roomID !== undefined) {\r\n        setRoom([props.newRoom, ...room]);\r\n      }\r\n    }\r\n  }, [props, room]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"roomNav\">\r\n        <div className=\"navHeader\">\r\n          <span className=\"textTitle\">Chats</span>\r\n          <input\r\n            name=\"search\"\r\n            onFocus={() => {\r\n              searchIconRef.current.style.display = \"none\";\r\n              searchContainerRef.current.style.display = \"flex\";\r\n            }}\r\n            onBlur={(event) => {\r\n              if (event.target.value.length === 0) {\r\n                searchIconRef.current.style.display = \"flex\";\r\n                searchContainerRef.current.style.display = \"none\";\r\n              }\r\n            }}\r\n            onInput={(event) => {\r\n              searchUser(event);\r\n            }}\r\n            className=\"searchBar\"\r\n          />\r\n          <IonIcon ref={searchIconRef} icon={Icon.searchOutline} className=\"searchIcon\"></IonIcon>\r\n        </div>\r\n        <div className=\"roomContainer\">\r\n          {room.map((room) => {\r\n            return (\r\n              <RoomExist\r\n                key={room.roomID}\r\n                ID={room.recipient}\r\n                roomID={room.roomID}\r\n                message={props.message}\r\n                setMessage={props.setMessage}\r\n                ref={ref}\r\n                name={room.roomName}\r\n                latestMessage={!props.latestMessage[`${room.roomID}`] ? room.lastMessage : props.latestMessage[`${room.roomID}`].content}\r\n                sender={!props.latestMessage[`${room.roomID}`] ? room.senderName : props.latestMessage[`${room.roomID}`].sender}\r\n                timestamp={room.timestamp}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <div ref={searchContainerRef} className=\"searchContainer\">\r\n          {searchResult.map((user) => {\r\n            return (\r\n              <Room\r\n                key={user.ID}\r\n                ref={ref}\r\n                ID={user.ID}\r\n                searchContainerRef={searchContainerRef}\r\n                message={props.message}\r\n                setMessage={props.setMessage}\r\n                name={user.user}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}