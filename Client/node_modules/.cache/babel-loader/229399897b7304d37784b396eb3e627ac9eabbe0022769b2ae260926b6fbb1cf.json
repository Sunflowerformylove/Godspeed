{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hunter\\\\Desktop\\\\Godspeed\\\\Client\\\\src\\\\Components\\\\RoomNav.js\",\n  _s = $RefreshSig$();\nimport \"../Style/RoomNav.css\";\nimport { forwardRef, useEffect, useRef, useState } from \"react\";\nimport { Room, RoomExist } from \"./Room\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport Socket from \"./Socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const RoomNav = /*#__PURE__*/_s( /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n  const searchIconRef = useRef(null);\n  const searchContainerRef = useRef(null);\n  const [searchResult, setSearchRes] = useState([]);\n  const [room, setRoom] = useState([]);\n  useEffect(() => {\n    Socket.emit(\"getRoom\", Cookies.get(\"userID\"));\n    Socket.on(\"loadRoom\", data => {\n      setRoom(data);\n    });\n  }, []);\n  function searchUser(event) {\n    if (event.target.value.trim() !== \"\") {\n      axios({\n        method: \"POST\",\n        url: \"http://localhost:3000/search\",\n        data: JSON.stringify({\n          search: event.target.value.trim()\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.data).then(data => {\n        setSearchRes(data);\n      });\n    } else {\n      setSearchRes([]);\n    }\n  }\n  function checkContain(arr, obj) {\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i].roomID === obj.roomID) {\n        return true;\n      }\n    }\n    return false;\n  }\n  useEffect(() => {\n    for (let i = 0; i < room.length; i++) {\n      if (room[i].roomID === props.newRoom.roomID && room[i].recipient === props.newRoom.recipient) {\n        props.newRoom.roomName = room[i].roomName;\n        props.newRoom.recipientName = room[i].recipientName;\n        props.newRoom.senderName = room[i].senderName;\n        props.newRoom.lastMessage = room[i].lastMessage;\n        let temp = room;\n        temp.splice(i, 1);\n        temp.unshift(props.newRoom);\n        setRoom(temp);\n        return;\n      }\n    }\n    if (!checkContain(room, props.newRoom)) {\n      if (props.newRoom.roomID !== undefined) {\n        setRoom([props.newRoom, ...room]);\n      }\n    }\n  }, [props, room]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"roomNav\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navHeader\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"textTitle\",\n          children: \"Chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"search\",\n          onFocus: () => {\n            searchIconRef.current.style.display = \"none\";\n            searchContainerRef.current.style.display = \"flex\";\n          },\n          onBlur: event => {\n            if (event.target.value.length === 0) {\n              searchIconRef.current.style.display = \"flex\";\n              searchContainerRef.current.style.display = \"none\";\n            }\n          },\n          onInput: event => {\n            searchUser(event);\n          },\n          className: \"searchBar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          ref: searchIconRef,\n          className: \"fa-solid fa-magnifying-glass searchIcon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"roomContainer\",\n        children: room.map(room => {\n          return /*#__PURE__*/_jsxDEV(RoomExist, {\n            ID: room.recipient,\n            roomID: room.roomID,\n            message: props.message,\n            setMessage: props.setMessage,\n            ref: ref,\n            name: room.roomName,\n            latestMessage: !props.latestMessage.content ? room.lastMessage : props.latestMessage[`${room.roomID}`].content,\n            sender: props.latestMessage.sender,\n            timestamp: room.timestamp\n          }, room.roomID, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: searchContainerRef,\n        className: \"searchContainer\",\n        children: searchResult.map(user => {\n          return /*#__PURE__*/_jsxDEV(Room, {\n            ref: ref,\n            ID: user.ID,\n            searchContainerRef: searchContainerRef,\n            message: props.message,\n            setMessage: props.setMessage,\n            name: user.user\n          }, user.ID, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}, \"Mp/1nMkLJWxvVmPvIAsubjBBAK0=\")), \"Mp/1nMkLJWxvVmPvIAsubjBBAK0=\");\n_c2 = RoomNav;\nvar _c, _c2;\n$RefreshReg$(_c, \"RoomNav$forwardRef\");\n$RefreshReg$(_c2, \"RoomNav\");","map":{"version":3,"names":["forwardRef","useEffect","useRef","useState","Room","RoomExist","axios","Cookies","Socket","jsxDEV","_jsxDEV","Fragment","_Fragment","RoomNav","_s","_c","props","ref","searchIconRef","searchContainerRef","searchResult","setSearchRes","room","setRoom","emit","get","on","data","searchUser","event","target","value","trim","method","url","JSON","stringify","search","headers","then","response","checkContain","arr","obj","i","length","roomID","newRoom","recipient","roomName","recipientName","senderName","lastMessage","temp","splice","unshift","undefined","children","className","fileName","_jsxFileName","lineNumber","columnNumber","name","onFocus","current","style","display","onBlur","onInput","map","ID","message","setMessage","latestMessage","content","sender","timestamp","user","_c2","$RefreshReg$"],"sources":["C:/Users/Hunter/Desktop/Godspeed/Client/src/Components/RoomNav.js"],"sourcesContent":["import \"../Style/RoomNav.css\";\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\";\r\nimport { Room, RoomExist } from \"./Room\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport Socket from \"./Socket\";\r\nexport const RoomNav = forwardRef((props, ref) => {\r\n  const searchIconRef = useRef(null);\r\n  const searchContainerRef = useRef(null);\r\n  const [searchResult, setSearchRes] = useState([]);\r\n  const [room, setRoom] = useState([]);\r\n  useEffect(() => {\r\n    Socket.emit(\"getRoom\", Cookies.get(\"userID\"));\r\n    Socket.on(\"loadRoom\", (data) => {\r\n      setRoom(data);\r\n    });\r\n  }, []);\r\n  function searchUser(event) {\r\n    if (event.target.value.trim() !== \"\") {\r\n      axios({\r\n        method: \"POST\",\r\n        url: \"http://localhost:3000/search\",\r\n        data: JSON.stringify({ search: event.target.value.trim() }),\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      })\r\n        .then((response) => response.data)\r\n        .then((data) => {\r\n          setSearchRes(data);\r\n        });\r\n    } else {\r\n      setSearchRes([]);\r\n    }\r\n  }\r\n\r\n  function checkContain(arr, obj) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (arr[i].roomID === obj.roomID) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  useEffect(() => {\r\n    for (let i = 0; i < room.length; i++) {\r\n      if (\r\n        room[i].roomID === props.newRoom.roomID &&\r\n        room[i].recipient === props.newRoom.recipient\r\n      ) {\r\n        props.newRoom.roomName = room[i].roomName;\r\n        props.newRoom.recipientName = room[i].recipientName;\r\n        props.newRoom.senderName = room[i].senderName;\r\n        props.newRoom.lastMessage = room[i].lastMessage;\r\n        let temp = room;\r\n        temp.splice(i, 1);\r\n        temp.unshift(props.newRoom);\r\n        setRoom(temp);\r\n        return;\r\n      }\r\n    }\r\n    if (!checkContain(room, props.newRoom)) {\r\n      if (props.newRoom.roomID !== undefined) {\r\n        setRoom([props.newRoom, ...room]);\r\n      }\r\n    }\r\n  }, [props, room]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"roomNav\">\r\n        <div className=\"navHeader\">\r\n          <span className=\"textTitle\">Chats</span>\r\n          <input\r\n            name=\"search\"\r\n            onFocus={() => {\r\n              searchIconRef.current.style.display = \"none\";\r\n              searchContainerRef.current.style.display = \"flex\";\r\n            }}\r\n            onBlur={(event) => {\r\n              if (event.target.value.length === 0) {\r\n                searchIconRef.current.style.display = \"flex\";\r\n                searchContainerRef.current.style.display = \"none\";\r\n              }\r\n            }}\r\n            onInput={(event) => {\r\n              searchUser(event);\r\n            }}\r\n            className=\"searchBar\"\r\n          />\r\n          <i\r\n            ref={searchIconRef}\r\n            className=\"fa-solid fa-magnifying-glass searchIcon\"\r\n          ></i>\r\n        </div>\r\n        <div className=\"roomContainer\">\r\n          {room.map((room) => {\r\n            return (\r\n              <RoomExist\r\n                key={room.roomID}\r\n                ID={room.recipient}\r\n                roomID={room.roomID}\r\n                message={props.message}\r\n                setMessage={props.setMessage}\r\n                ref={ref}\r\n                name={room.roomName}\r\n                latestMessage = {!props.latestMessage.content ? room.lastMessage: props.latestMessage[`${room.roomID}`].content}\r\n                sender = {props.latestMessage.sender}\r\n                timestamp={room.timestamp}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <div ref={searchContainerRef} className=\"searchContainer\">\r\n          {searchResult.map((user) => {\r\n            return (\r\n              <Room\r\n                key={user.ID}\r\n                ref={ref}\r\n                ID={user.ID}\r\n                searchContainerRef={searchContainerRef}\r\n                message={props.message}\r\n                setMessage={props.setMessage}\r\n                name={user.user}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}